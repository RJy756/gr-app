"use strict";$(function(){FastClick.attach(document.body),connectWebViewJavascriptBridge(function(e){function t(t){var n={modalId:"modal1",title:"提示",text:t,type:"0",buttons:[{text:"确定",value:"btn"}]};e.callHandler("modal",n,function(e){})}function n(){$.ajax({url:i+"friends.json",type:a,timeout:3e3,headers:{"Http-X-User-Access-Token":s},success:function(e,n,o){if("string"==typeof e&&(e=JSON.parse(e)),"success"===e.result)if(e.code)e.message?($(".body-table").hide(),$(".no-record").show(),t(e.message)):($(".body-table").hide(),$(".no-record").show(),t("网络异常，请重试"));else if($("#table-info").empty(),e.friends.length>0){for(var r,s=0;s<e.friends.length;s++)r=e.friends[s].hasFinancialSubscribe?"是":"否",$("#table-info").append("<tr> <td>"+e.friends[s].regTime+"</td> <td>"+e.friends[s].account+"</td> <td>"+r+"</td> </tr>");$(".no-record").hide(),$(".body-table").show()}else $(".body-table").hide(),$(".no-record").show();else e.message?($(".body-table").hide(),$(".no-record").show(),t(e.message)):($(".body-table").hide(),$(".no-record").show(),t("网络异常，请重试"))},error:function(e,n,o){$(".body-table").hide(),$(".no-record").show(),t("网络异常，请重试")},complete:function(e,n){$(".spinner-content").hide(),"timeout"===n&&($(".body-table").hide(),$(".no-record").show(),t("网络超时，请重试"))}})}function o(){$.ajax({url:i+"index.json",type:a,timeout:3e3,headers:{"Http-X-User-Access-Token":s},async:!1,success:function(e,o,r){"string"==typeof e&&(e=JSON.parse(e)),"success"===e.result?e.code?t(e.message?e.message:"网络异常，请重试"):(n(),$("#amount").text(e.awardAmount)):t(e.message?e.message:"网络异常，请重试")},error:function(e,n,o){t("网络异常，请重试")},complete:function(e,n){"timeout"===n&&t("网络超时，请重试")}})}function r(){s?o():($(".body-table").hide(),$(".no-record").show(),$(".spinner-content").hide())}var s,i=location.protocol+"//"+location.host+"/activity/invite/",a="POST";e.registerHandler("returnBackHandler",function(e,t){var n={};n.isFirstPage=!0,t(n)}),e.registerHandler("loginHandler",function(e,t){"string"==typeof e&&(e=JSON.parse(e)),s=e.token,r();var n={};n.triggerId="login",t(n)}),function(){var t,n={triggerId:"getUserToken"};e.callHandler("getUserToken",n,function(n){return null===n?(r(),t={triggerId:"noToken"},void e.callHandler("login",t,function(e){})):n&&("string"==typeof n&&(n=JSON.parse(n)),""===n.token)?(r(),t={triggerId:"noToken"},void e.callHandler("login",t,function(e){})):("string"==typeof n&&(n=JSON.parse(n)),s=n.token,void r())})}()})});