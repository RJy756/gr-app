"use strict";$(function(){function t(){if(d=Cookies.get("startTime")){b.addClass("disabled");var t=parseInt((d-(new Date).getTime())/1e3);b.text(t+"s后重发")}else b.removeClass("disabled"),b.text("获取验证码")}function e(){Cookies.set("startTime",(new Date).getTime()+6e4,{expires:new Date((new Date).getTime()+6e4)}),t()}function o(){$("html,body").css({overflow:"auto",height:"auto"}),$(".alert-box2").fadeOut(300)}function n(){$("html,body").css({overflow:"hidden",height:"100%"}),$(".alert-box2").fadeIn(100),$(".alert-box2 .btn-close-alert, .alert-box2 .btn-left").click(function(){o()}),$(".alert-box2 .btn-right").click(function(){location.href=location.protocol+"//"+location.host+"/home/invite/fail.html"})}function i(){$("html,body").css({overflow:"auto",height:"auto"}),$(".alert-box").fadeOut(300),$(".alert-box .alert-text").text("")}function c(t){$("html,body").css({overflow:"hidden",height:"100%"}),$(".alert-box .alert-text").text(t),$(".alert-box").fadeIn(100),$(".alert-box .btn-close-alert").click(function(){i()})}function a(){$.ajax({url:l+"common/reg.json",type:r,timeout:3e3,data:{account:u,regVerifyCode:f,pwd:h,channel:m},async:!1,success:function(t,e,o){"string"==typeof t&&(t=JSON.parse(t)),"success"===t.result?"true"===t.isExist?location.href=location.protocol+"//"+location.host+"/home/invite/fail.html":location.href=location.protocol+"//"+location.host+"/home/invite/success.html":c(t.message?t.message:"网络异常，请重试")},error:function(t,e,o){c("网络异常，请重试")},complete:function(t,e){"timeout"===e&&c("网络超时，请重试")}})}function s(){$.ajax({url:l+"common/send_verify_code.json",type:r,timeout:3e3,data:{verifyType:"001",mobile:u},contentType:"application/x-www-form-urlencoded; charset=UTF-8",async:!1,success:function(t,o,a){"string"==typeof t&&(t=JSON.parse(t)),"success"===t.result?(c("验证码发送成功"),e(),setTimeout(function(){i()},3e3)):t.code&&"accountIsExists"===t.code?n():c(t.message?t.message:"网络异常，请重试")},error:function(t,e,o){c("网络异常，请重试")},complete:function(t,e){"timeout"===e&&c("网络超时，请重试")}})}FastClick.attach(document.body);var l=location.protocol+"//"+location.host+"/activity/",r="POST";console.log(l);var u,f,h,d,m,p=/^[1]\d{10}$/,b=$(".btn-get-vCode"),g=Arg.parse(location.href);g.channel?m=g.channel:c("参数异常，请重试"),b.click(function(){$(this).hasClass("disabled")||(u=$("#phone-input").val(),p.test(u)?s():c("手机号码不正确"))}),$(".btn-register").click(function(){u=$("#phone-input").val(),f=$("#vCode-input").val(),h=$("#pwd-input").val(),p.test(u)?f?h&&h.length>5?a():(c("请输入长度至少6位的登录密码"),setTimeout(function(){i()},1500)):(c("请输入验证码"),setTimeout(function(){i()},1500)):c("手机号码不正确")}),t(),setInterval(function(){t()},1e3)});